(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(37),i=a.n(s),o=(a(86),a(7)),c=a(8),u=a(6),l=a(9),d=a(10),h=a(79),m=a(13),f=a(5),p=(a(87),a(170)),k=(a(88),a(171)),v="task",y="note",b=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isHoverTarget:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.taskText,n=e.deleteTask,s=this.props,i=s.isDragging,o=s.connectDragSource,c=s.connectDropTarget,u=s.hovered,l=(s.isEditing,"");return 1===t?(l="",""):2===t?(l="#D6A115",""):3===t&&(l="#509B5A",""),c(o(r.a.createElement("div",{style:i?{display:"none"}:{}},u&&r.a.createElement("div",{className:"hovered"}),r.a.createElement("div",{className:"task",style:{backgroundColor:l}},r.a.createElement("button",{onClick:n,className:"x-button"},"\u2613"),a,t?r.a.createElement("button",{onClick:this.props.changeTaskState,className:"done-button"},"\u2714"):r.a.createElement("button",{style:{visibility:"hidden"}},"\u2714")))))}}]),a}(r.a.Component),g=function(e){return e.status?v:y},j=[v,y],T={drop:function(e,t,a){if(!t.didDrop()){var n=e.position;g(e)===t.getItemType()&&e.position>t.getItem().position&&(g(e)===v&&t.getItem().timestamp===e.timestamp||g(e)===y)&&n--;var r={item:t.getItem(),type:t.getItemType()},s={item:{timestamp:e.timestamp,position:n},type:g(e)};e.moveTask(r,s)}}},E=Object(k.a)(g,{beginDrag:function(e){return{timestamp:e.timestamp,position:e.position}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Object(p.a)(j,T,(function(e,t){return{highlighted:t.canDrop(),hovered:t.isOver(),connectDropTarget:e.dropTarget()}}))(b)),S=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isEditing:!1},n.taskTextRef=r.a.createRef(),n.onTaskSubmit=n.onTaskSubmit.bind(Object(u.a)(n)),n.enterEditMode=n.enterEditMode.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"enterEditMode",value:function(){var e=this;this.setState({isEditing:!0},(function(){return e.taskTextRef.current.focus()}))}},{key:"onTaskSubmit",value:function(){var e=this.taskTextRef.current.innerText;this.props.addTask(e),this.setState({isEditing:!1})}},{key:"render",value:function(){var e=this;return this.props.connectDropTarget(r.a.createElement("div",{className:"day-box"},r.a.createElement("h2",null,this.props.dayName,this.props.isToday?r.a.createElement("p",{style:{color:"red"}},this.props.dayDate):r.a.createElement("p",null,this.props.dayDate)),this.props.tasks.map((function(t){return r.a.createElement(E,{key:"".concat(t.id),deleteTask:function(){return e.props.deleteTask(t.id)},moveTask:function(t,a){return e.props.moveTask(t,a)},id:t.id,taskText:t.text,status:t.state,timestamp:e.props.timestamp,position:t.position,changeTaskState:function(){return e.props.changeTaskState(t.id)}})})),this.state.isEditing?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-area",style:this.props.hovered?{marginTop:"80px"}:{}},r.a.createElement("div",{className:"text-area",contentEditable:!0,ref:this.taskTextRef,placeholder:"Enter task text",onKeyDown:function(t){13===t.keyCode?e.onTaskSubmit():27===t.keyCode&&e.setState({isEditing:!1})}}),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("button",{className:"submit-button",onClick:this.onTaskSubmit},"\u27a4"))),r.a.createElement("div",{onClick:function(){return e.setState({isEditing:!1})},className:"layerClick"})):r.a.createElement("button",{onClick:this.enterEditMode,className:"add-task-button",style:this.props.hovered?{marginTop:"80px"}:{}},"+")))}}]),a}(r.a.Component),O=[v,y],D={drop:function(e,t,a){if(!t.didDrop()){var n=e.timestamp?v:y,r=e.tasks.length;n===t.getItemType()&&(n===v&&t.getItem().timestamp===e.timestamp||n===y)&&r--;var s={item:t.getItem(),type:t.getItemType()},i={item:{timestamp:e.timestamp,position:r},type:n};e.moveTask(s,i)}}},N=Object(p.a)(O,D,(function(e,t){return{hovered:t.isOver({shallow:!0}),connectDropTarget:e.dropTarget()}}))(S),C=(a(92),a(93),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("button",{onClick:this.props.handleClick,className:"button2"},this.props.children)}}]),a}(r.a.Component)),w=(a(94),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("i",{className:["arrow arrow-".concat(this.props.direction)]})}}]),a}(r.a.Component)),x=(a(95),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"numberSelector2"},r.a.createElement("span",null,"Week"),r.a.createElement("div",{className:"numberSelectorBox"},this.props.value),r.a.createElement("div",{className:"buttonBox"},r.a.createElement("button",{onClick:this.props.handleClickUp,className:"button2"},r.a.createElement(w,{direction:"up"})),r.a.createElement("button",{onClick:this.props.handleClickDown,className:"button2"},r.a.createElement(w,{direction:"down"}))))}}]),a}(r.a.Component)),P=a(15),M=a.n(P),W=a(25),F=function(){var e=Object(W.a)(M.a.mark((function e(t){var a,n,r=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch(t,Object(m.a)({cache:"no-store"},a));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch content");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=a(77),A=a(169),R=function(e){return"/week?week=".concat(e)},I=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],J=["January","February","March","April","May","June","July","August","September","October","November","December"],L=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).SetCurrentWeekState=function(){var e=n.getCurrentWeekNum();n.fetchWeekToState(n.getCurrentYear(),e),n.setState({chosenYear:n.getCurrentYear(),chosenWeek:e})},n.clickUp=function(){var e=n.state.chosenWeek+1;53===e&&!1===n.longYear(n.state.chosenYear)?(e=1,n.fetchWeekToState(n.state.chosenYear+1,e),n.setState({chosenYear:n.state.chosenYear+1,chosenWeek:e})):53===e&&n.longYear(n.state.chosenYear)?(n.fetchWeekToState(n.state.chosenYear,e),n.setState({chosenWeek:e})):54===e?(e=1,n.fetchWeekToState(n.state.chosenYear+1,e),n.setState({chosenYear:n.state.chosenYear+1,chosenWeek:e})):(n.fetchWeekToState(n.state.chosenYear,e),n.setState({chosenYear:n.state.chosenYear,chosenWeek:e}))},n.clickDown=function(){var e=n.state.chosenWeek-1;0===e&&n.longYear(n.state.chosenYear-1)?(e=53,n.fetchWeekToState(n.state.chosenYear-1,e),n.setState({chosenYear:n.state.chosenYear-1,chosenWeek:e})):0!==e||n.longYear(n.state.chosenYear-1)?(n.fetchWeekToState(n.state.chosenYear,e),n.setState({chosenYear:n.state.chosenYear,chosenWeek:e})):(e=52,n.fetchWeekToState(n.state.chosenYear-1,e),n.setState({chosenYear:n.state.chosenYear-1,chosenWeek:e}))},n.dateToDayConverter=function(e){var t="string"===typeof e?e.substr(6,7):null;return parseInt(t)},n.state={days:[{date:"20200416",tasks:[]},{date:"20200417",tasks:[]},{date:"20200418",tasks:[]},{date:"20200419",tasks:[]},{date:"20200420",tasks:[]},{date:"20200421",tasks:[]},{date:"20200422",tasks:[]}],notes:[],chosenWeek:n.getCurrentWeekNum(),chosenYear:n.getCurrentYear()},n.addTask=n.addTask.bind(Object(u.a)(n)),n.deleteTask=n.deleteTask.bind(Object(u.a)(n)),n.addNote=n.addNote.bind(Object(u.a)(n)),n.deleteNote=n.deleteNote.bind(Object(u.a)(n)),n.moveTask=n.moveTask.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchWeekToState(this.state.chosenYear,this.state.chosenWeek),this.fetchNotesToState()}},{key:"fetchWeekToState",value:function(e,t){var a=this;F(function(e,t){return"/week?week=".concat(e).concat(t)}(e,t)).then((function(e){e.forEach((function(e){return e.tasks.sort((function(e,t){return e.position-t.position}))})),a.setState({days:e})})).catch((function(e){alert(e.message),console.error(e)}))}},{key:"fetchNotesToState",value:function(){var e=this;F("/notes?key=value").then((function(t){t.sort((function(e,t){return e.position-t.position})),e.setState({notes:t})})).catch((function(e){alert(e.message),console.error(e)}))}},{key:"getCurrentWeekNum",value:function(){var e=new Date,t=(new Date).getFullYear(),a=new Date("January 4, ".concat(t,"   01:15:00"));return 1+Math.round(((e.getTime()-a.getTime())/864e5-3+(a.getDay()+6)%7)/7)}},{key:"getCurrentWeekDay",value:function(){var e=(new Date).getDay();return 0===e?I[6]:I[e-1]}},{key:"getCurrentDayNumber",value:function(){var e=(new Date).getDate();return console.log(e),e}},{key:"getCurrentYearMonth",value:function(){var e=(new Date).getMonth();return J[e]}},{key:"getCurrentYearMonthNumber",value:function(){var e=(new Date).getMonth()+1;if(e<10){e="0".concat(e)}return e}},{key:"getCurrentYear",value:function(){return(new Date).getFullYear()}},{key:"timeBlockDisplay",value:function(){var e=(new Date).getDay(),t=this.state.days[e].date,a=parseInt(t.slice(4,6)),n=t.slice(0,4);return J[a-1]+" "+n}},{key:"longYear",value:function(e){var t=e,a=t-1,n=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,r=(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7;return 4===n||3===r}},{key:"addTask",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=r||this.state.days[a].tasks.length,i={text:e,date:t,state:1,position:s},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},c=Object(f.a)(this.state.days);c[a]=Object(m.a)({},c[a]),c[a].tasks=Object(f.a)(c[a].tasks),void 0===r?c[a].tasks.push(i):c[a].tasks=this.insertAndShiftTask(c[a].tasks,i,s),this.setState({days:c}),F(R(t),o).then((function(e){var t=Object(f.a)(c);t[a]=Object(m.a)({},t[a]),t[a].tasks=Object(f.a)(t[a].tasks),t[a].tasks[s]=Object(m.a)({},t[a].tasks[s],{id:e[0]}),n.setState({days:t})})).catch((function(){return alert("Failed to create task")}))}},{key:"deleteTask",value:function(e,t){F(function(e){return"/week?week=".concat(e)}(e),{method:"DELETE"}).catch((function(){return alert("Failed to delete task")}));var a=Object(f.a)(this.state.days);a[t]=Object(m.a)({},a[t]),a[t].tasks=Object(f.a)(a[t].tasks);var n=a[t].tasks.findIndex((function(t){return t.id===e}));a[t].tasks.splice(n,1),this.correctPositions(a[t].tasks),this.setState({days:a})}},{key:"moveTask",value:function(e,t){e.type===v&&t.type===v?this.moveDayTask({date:e.item.timestamp,position:e.item.position},{date:t.item.timestamp,position:t.item.position}):e.type===y&&t.type===y?this.moveNote(e.item.position,t.item.position):e.type===v&&t.type===y?this.moveDayTaskToNote(e.item.timestamp,e.item.position,t.item.position):e.type===y&&t.type===v&&this.moveNoteToDayTask(e.item.position,t.item.timestamp,t.item.position)}},{key:"moveDayTask",value:function(e,t){var a=this.state.days.findIndex((function(t){return e.date===t.date})),n=this.state.days.findIndex((function(e){return t.date===e.date})),r=Object(f.a)(this.state.days);r[a]=Object(m.a)({},r[a]),r[n]=Object(m.a)({},r[n]),r[a].tasks=Object(f.a)(r[a].tasks),r[n].tasks=Object(f.a)(r[n].tasks);var s=r[a].tasks.find((function(t){return t.position===e.position}));r[a].tasks=r[a].tasks.filter((function(t){return t.position!==e.position})),this.correctPositions(r[a].tasks),s.date=r[n].date;var i,o=this.insertAndShiftTask(r[n].tasks,s,t.position);if(r[n].tasks=o,this.setState({days:r}),e.date===t.date){if(i=r[a].tasks.filter((function(a,n){return n>=Math.min(e.position,t.position)})),e.position<t.position){var c=i.findIndex((function(e){return e.id===s.id}));i[c]=Object(m.a)({},i[c],{position:i[c].position+1})}}else{var u=r[a].tasks.filter((function(t,a){return a>=e.position})),l=r[n].tasks.filter((function(e,a){return a>=t.position}));i=[].concat(Object(f.a)(u),Object(f.a)(l))}var d={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};F("/week?key=value",d).catch((function(){return alert("Failed to move task")}))}},{key:"moveNote",value:function(e,t){var a=Object(f.a)(this.state.notes),n=a.splice(e,1),r=Object(h.a)(n,1)[0];this.correctPositions(a),a=this.insertAndShiftTask(a,r,t),this.setState({notes:a});var s=a.filter((function(a,n){return n>=Math.min(e,t)}));if(e<t){var i=s.findIndex((function(e){return e.id===r.id}));s[i]=Object(m.a)({},s[i],{position:s[i].position+1})}var o={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};F("/notes?key=value",o).catch((function(){return alert("Failed to move note")}))}},{key:"moveDayTaskToNote",value:function(e,t,a){var n=this.state.days.findIndex((function(t){return e===t.date})),r=this.state.days[n].tasks[t],s=r.id,i=r.text;this.deleteTask(s,n),this.addNote(i,a)}},{key:"moveNoteToDayTask",value:function(e,t,a){var n=this.state.days.findIndex((function(e){return t===e.date})),r=this.state.days[n].date,s=this.state.notes[e],i=s.id,o=s.text;this.deleteNote(i),this.addTask(o,r,n,a)}},{key:"correctPositions",value:function(e){e.sort((function(e,t){return e.position-t.position})),e.forEach((function(e,t){return e.position=t}))}},{key:"insertAndShiftTask",value:function(e,t,a){var n=e.slice(0,a),r=e.slice(a,e.length).map((function(e){return Object(m.a)({},e,{position:e.position+1})}));return[].concat(Object(f.a)(n),[Object(m.a)({},t,{position:a})],Object(f.a)(r))}},{key:"addNote",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=a||this.state.notes.length,r={text:e,position:n},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},i=Object(f.a)(this.state.notes);void 0===a?i.push(r):i=this.insertAndShiftTask(i,r,n),this.setState({notes:i}),F("/notes?key=value",s).then((function(e){var a=Object(f.a)(i);a[n]=Object(m.a)({},a[n],{id:e[0]}),t.setState({notes:a})})).catch((function(){return alert("Failed to create note")}))}},{key:"deleteNote",value:function(e){F(function(e){return"/notes?id=".concat(e)}(e),{method:"DELETE"}).catch((function(){return alert("Failed to delete task")}));var t=Object(f.a)(this.state.notes),a=t.findIndex((function(t){return t.id===e}));t.splice(a,1),this.correctPositions(t),this.setState({notes:t})}},{key:"isTodaysDate",value:function(e){return e.substring(0,4)===this.getCurrentYear()&&e.substring(4,6)===this.getCurrentYearMonthNumber()&&e.substring(6,8)===this.getCurrentDayNumber()}},{key:"onChangeTaskState",value:function(e,t){var a=Object(f.a)(this.state.days);a[t]=Object(m.a)({},a[t]),a[t].tasks=Object(f.a)(a[t].tasks);var n=a[t].tasks.findIndex((function(t){return t.id===e}));a[t].tasks[n]=Object(m.a)({},a[t].tasks[n]);var r,s=a[t].tasks[n];r=3===s.state?1:s.state+1,s.state=r;var i={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify([s])};F("/week?key=value",i).catch((function(){return alert("Failed to update state of task")})),this.setState({days:a})}},{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{backend:Y.a},r.a.createElement("div",{className:"week-view"},r.a.createElement("div",{className:"week"},r.a.createElement("div",{className:"week-header"},r.a.createElement("div",{style:{paddingLeft:"15%"}},r.a.createElement(x,{handleClickUp:this.clickUp,handleClickDown:this.clickDown,value:this.state.chosenWeek})),r.a.createElement("div",null,r.a.createElement("h1",{style:{color:"rgba(255,255,255,0.8)"}},this.timeBlockDisplay())),r.a.createElement("div",{style:{paddingRight:"15%"}},r.a.createElement(C,{handleClick:this.SetCurrentWeekState},"Current week"))),r.a.createElement("div",{className:"days"},I.map((function(t,a){var n=e.state.days[a],s=n.tasks,i=n.date;return r.a.createElement(N,{todaysDay:e.getCurrentWeekDay(),dayDate:e.dateToDayConverter(e.state.days[a].date),isToday:e.isTodaysDate(e.state.days[a].date),dayName:t,tasks:s,addTask:function(t){return e.addTask(t,i,a)},deleteTask:function(t){return e.deleteTask(t,a)},moveTask:function(t,a){return e.moveTask(t,a)},timestamp:i,changeTaskState:function(t){return e.onChangeTaskState(t,a)},key:JSON.stringify(e.state.days[a])})})),r.a.createElement("button",{onClick:this.clickDown,className:"previous-week"},r.a.createElement(w,{direction:"left"})),r.a.createElement("button",{onClick:this.clickUp,className:"next-week"},r.a.createElement(w,{direction:"right"})))),r.a.createElement("div",{className:"note-container"},r.a.createElement(N,{dayName:"Notes",tasks:this.state.notes,addTask:this.addNote,deleteTask:this.deleteNote,moveTask:this.moveTask}))))}}]),a}(r.a.Component),B=(a(97),a(98),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.projectName,a=e.active,n=e.onDelete,s=e.onToggleActive;return r.a.createElement("div",{className:"project-wrapper"},r.a.createElement("div",{className:"project-task",style:{backgroundColor:a?"var(--project-green)":"rgb(40,40,40)"}},r.a.createElement("button",{onClick:function(){return n(t)},className:"x-button"},"X"),t,r.a.createElement("button",{onClick:s,className:"done-button"},a?"Set inactive":"Set active")),r.a.createElement("div",{className:"project-line"}))}}]),a}(r.a.Component)),H=(a(99),function(e){return new Date("".concat(e.substr(0,4),"-").concat(e.substr(4,2),"-").concat(e.substr(6,2)))}),U=function(e){return e.toISOString().substr(0,10).replace(/-/g,"")},K=function(e){return new Date(e.getTime())},q=function(e,t){return U(e)===U(t)},X=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.tasks,a=Math.max.apply(Math,Object(f.a)(t.filter((function(e){return void 0!==e&&void 0!==e.heightSplit})).map((function(e){return e.heightSplit}))).concat([t.length]));return r.a.createElement("div",{className:"timeline-tasks"},t.map((function(t){return e.renderTask(a,t)})))}},{key:"renderTask",value:function(e,t){var a,n,s=this,i={height:"calc(100% / ".concat(e,")")};if(void 0!==t){var o=(a=H(t.date),n=H(t.endDate),Math.round(Math.abs(a-n)/864e5));i.width="calc((".concat(o+1," * (100% + 2px)) - 2px)")}else i.visibility="hidden";return r.a.createElement("div",{className:"timeline-task",style:i},t&&r.a.createElement("p",null,t.text),r.a.createElement("button",{className:"delete-timeline-task",onClick:function(){return s.props.deleteTask(t.id)}},"\u292b"))}}]),a}(r.a.Component),$=(a(100),a(51)),z=a.n($),G=a(78),Q=(a(101),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e),Object($.registerLocale)("sv",G.a);var r=new Date,s=new Date;return s.setDate(s.getDate()+1),n.state={selectedProject:e.projects[0].name,startDate:r,endDate:s,taskText:""},n.submitTask=n.submitTask.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal",onClick:function(t){t.target===t.currentTarget&&e.props.onClose()}},r.a.createElement("div",{className:"add-task-modal"},r.a.createElement("h1",{className:"modal-title"},"Add Task"),r.a.createElement("div",{className:"field-columns"},r.a.createElement("div",{className:"field-titles"},r.a.createElement("p",{className:"field-row"},"Project"),r.a.createElement("p",{className:"field-row"},"Start date"),r.a.createElement("p",{className:"field-row"},"End date"),r.a.createElement("p",{className:"field-row"},"Task text")),r.a.createElement("div",{className:"field-inputs"},r.a.createElement("div",{className:"field-row"},r.a.createElement("select",{value:this.state.selectedProject,className:"project-selector",onChange:function(t){return e.setState({selectedProject:t.target.value})}},this.props.projects.map((function(e){return r.a.createElement("option",{value:e.name},e.name)})))),r.a.createElement("div",{className:"field-row"},r.a.createElement(z.a,{selected:this.state.startDate,onChange:function(t){return e.setState({startDate:t})},locale:"sv",dateFormat:"dd/MM/yyyy"})),r.a.createElement("div",{className:"field-row"},r.a.createElement(z.a,{selected:this.state.endDate,onChange:function(t){return e.setState({endDate:t})},locale:"sv",dateFormat:"dd/MM/yyyy"})),r.a.createElement("div",{className:"field-row"},r.a.createElement("input",{type:"text",placeholder:"Enter task text",value:this.state.taskText,onChange:function(t){return e.setState({taskText:t.target.value})}})))),r.a.createElement("button",{className:"modal-submit-button",onClick:this.submitTask},"Submit")))}},{key:"submitTask",value:function(){var e=this.state,t=e.startDate,a=e.endDate,n=e.selectedProject,r=e.taskText,s={date:U(t),endDate:U(a),project:this.props.projects.find((function(e){return e.name===n})),text:r};this.props.onSubmit(s)}}]),a}(r.a.Component)),V=function(e,t,a){return"/timeline?parameters=".concat(e.join("&"),"&").concat(t,"&").concat(a)},Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],ee=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).setStatePromise=function(e){return new Promise((function(t){return n.setState(e,t)}))};var s=new Date;return s.setDate(s.getDate()-28),n.state={startDate:s,rangeT:70,projectFilter:"any",projects:[],tasks:[],days:[],isLoading:!1,viewingRange:"month",inAddMode:!1,isEditingProject:!1},n.scrollerRef=r.a.createRef(),n.projectTextRef=r.a.createRef(),n.dateOffsetFromStart=n.dateOffsetFromStart.bind(Object(u.a)(n)),n.getWeekDay=n.getWeekDay.bind(Object(u.a)(n)),n.handleScroll=n.handleScroll.bind(Object(u.a)(n)),n.getMonth=n.getMonth.bind(Object(u.a)(n)),n.submitTask=n.submitTask.bind(Object(u.a)(n)),n.deleteTask=n.deleteTask.bind(Object(u.a)(n)),n.enterProjectEditMode=n.enterProjectEditMode.bind(Object(u.a)(n)),n.onProjectSumbit=n.onProjectSumbit.bind(Object(u.a)(n)),n.deleteProject=n.deleteProject.bind(Object(u.a)(n)),n.editProjectActive=n.editProjectActive.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"fetchTransformDataToState",value:function(){var e=Object(W.a)(M.a.mark((function e(){var t,a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchProjectsAndTasks();case 2:return t=e.sent,a=t.tasks,n=t.projects,r=this.tasksToDays(a,n),e.next=8,this.setStatePromise({tasks:a,projects:n,days:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransformTasksToState",value:function(){var e=Object(W.a)(M.a.mark((function e(){var t,a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.projects,e.next=3,this.fetchTasks(t);case 3:return a=e.sent,n=this.tasksToDays(a,t),e.next=7,this.setStatePromise({tasks:a,days:n});case 7:this.setState({isLoading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchProjectsAndTasks",value:function(){var e=Object(W.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchProjects();case 2:return t=e.sent,e.next=5,this.fetchTasks(t);case 5:return a=e.sent,e.abrupt("return",{projects:t,tasks:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchProjects",value:function(){var e=Object(W.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.projectFilter,e.next=4,F("/projects?select=".concat(t));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),alert("Failed to fetch timeline projects");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTasks",value:function(){var e=Object(W.a)(M.a.mark((function e(t){var a,n,r,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.state,n=a.startDate,r=a.rangeT,(s=K(n)).setDate(s.getDate()+r),e.next=6,F(V(t.map((function(e){return e.name})),U(n),U(s)));case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),alert("Failed to fetch timeline tasks");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tasksToDays",value:function(e,t){for(var a=this,n=[],r=[],s=function(s){var i,o=K(a.state.startDate);o.setDate(o.getDate()+s);var c=e.filter((function(e){return e.date===U(o)})),u=t.map((function(e){var t=r.filter((function(t){return t.project.name===e.name})),a=[].concat(Object(f.a)(t.map((function(){}))),Object(f.a)(c.filter((function(t){return t.project.name===e.name})))),n=a.length;return t.forEach((function(e){return e.heightSplit=e.heightSplit>n?e.heightSplit:n})),a}));(i=r).push.apply(i,Object(f.a)(c)),r=r.filter((function(e){return e.endDate!==U(o)})),n.push({tasks:u,date:K(o)})},i=0;i<this.state.rangeT;i++)s(i);return n}},{key:"dateOffsetFromStart",value:function(e){var t=K(this.state.startDate);return t.setDate(t.getDate()+e),t}},{key:"getWeekDay",value:function(e){return Z[e.getDay()]}},{key:"getMonth",value:function(e){return _[e.getMonth()]}},{key:"goBack",value:function(){var e=this,t=this.scrollerRef.current.scrollWidth,a=K(this.state.startDate);a.setDate(a.getDate()-14),this.setState({startDate:a,rangeT:this.state.rangeT+14},(function(){return e.fetchTransformTasksToState().then((function(){e.scrollerRef.current.scrollLeft+=e.scrollerRef.current.scrollWidth-t}))}))}},{key:"goForward",value:function(){var e=this;this.setState({rangeT:this.state.rangeT+14},(function(){return e.fetchTransformTasksToState()}))}},{key:"isFocusedDate",value:function(e){var t=new Date;return t.setDate(t.getDate()-9),q(e,t)}},{key:"handleScroll",value:function(){if(!1===this.state.isLoading){var e=this.scrollerRef.current.scrollLeft,t=this.scrollerRef.current.scrollWidth,a=this.scrollerRef.current.offsetWidth;e<500?(this.setState({isLoading:!0}),this.goBack()):t-e-a<500&&(this.setState({isLoading:!0}),this.goForward())}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Timeline"},r.a.createElement("div",{className:"Timeline-header"},r.a.createElement("div",null),r.a.createElement("h1",null,"Timeline"),r.a.createElement("div",{className:"right-part"},r.a.createElement("select",{value:this.state.viewingRange,className:"viewingRange",onChange:function(t){return e.setState({viewingRange:t.target.value})}},r.a.createElement("option",{value:"week"},"Week"),r.a.createElement("option",{value:"month"},"Month"),r.a.createElement("option",{value:"two-months"},"2 Months"),r.a.createElement("option",{value:"three-months"},"3 Months")),r.a.createElement("button",{className:"addTimlineTaskButton",style:{backgroundColor:"rgb(48,48,48)",color:"rgba(255,255,255,0.8)",border:"none"},onClick:function(){return e.setState({inAddMode:!0})}}," + Add task"))),r.a.createElement("div",{className:"Timeline-holder"},r.a.createElement("div",{className:"project-day-container"},r.a.createElement("div",{className:"projects-container"},r.a.createElement("div",{className:"Project-header"},r.a.createElement("select",{className:"projectFilter",value:this.state.projectFilter,onChange:function(t){e.setState({projectFilter:t.target.value},(function(){return e.fetchTransformDataToState()}))}},r.a.createElement("option",{value:"any"},"Any activity"),r.a.createElement("option",{value:"active"},"Only active"),r.a.createElement("option",{value:"inactive"},"Only inactive"))),this.state.projects.map((function(t){return r.a.createElement(B,{projectName:t.name,active:t.active,onDelete:e.deleteProject,onToggleActive:function(){return e.editProjectActive(t.name,!t.active)}})})),this.renderAddProject()),r.a.createElement("div",{ref:this.scrollerRef,className:"day-holder",onScroll:this.handleScroll},this.state.days.map((function(t){var a=t.date,n=new Date;return r.a.createElement("div",Object.assign({className:"day-Timeline ".concat(e.state.viewingRange)},e.isFocusedDate(a)?{id:"key"}:{}),r.a.createElement("div",{className:"day-header",style:q(n,a)?{color:"red"}:{}},e.getWeekDay(a)," ",r.a.createElement("br",null),e.getMonth(a)," ",r.a.createElement("br",null),a.getDate()),t.tasks.map((function(t,a){return r.a.createElement(X,{tasks:t,deleteTask:e.deleteTask})})))})))))),this.state.inAddMode&&r.a.createElement(Q,{className:"addTimelineTask",projects:this.state.projects,onSubmit:function(t){e.submitTask(t),e.setState({inAddMode:!1})},onClose:function(){return e.setState({inAddMode:!1})}}))}},{key:"onProjectSumbit",value:function(){var e=this,t=this.projectTextRef.current.innerText.trim();if(""!==t){var a={name:t,active:!0},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};F("/projects?key=value",n).then((function(){return e.fetchTransformDataToState()})).then(this.setStatePromise({isEditingProject:!1})).catch((function(){return alert("Failed to create project")}))}}},{key:"enterProjectEditMode",value:function(){var e=this;this.setState({isEditingProject:!0},(function(){return e.projectTextRef.current.focus()}))}},{key:"deleteProject",value:function(e){var t=this;F(function(e){return"/projects?name=".concat(e)}(e),{method:"DELETE"}).then((function(){return t.fetchProjects()})).then((function(e){return t.setStatePromise({projects:e})})).catch((function(){return alert("Failed to delete project")}))}},{key:"editProjectActive",value:function(e,t){var a={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify([{name:e,active:t}])};F("/projects?key=value",a).catch((function(){return alert("Failed to change project active state")}));var n=Object(f.a)(this.state.projects),r=n.findIndex((function(t){return t.name===e}));-1===r&&this.fetchTransformDataToState(),n[r]=Object(m.a)({},n[r]),n[r].active=t,this.setState({projects:n})}},{key:"renderAddProject",value:function(){var e=this;return this.state.isEditingProject?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-area"},r.a.createElement("div",{className:"text-area",contentEditable:!0,ref:this.projectTextRef,placeholder:"Enter project text",onKeyDown:function(t){13===t.keyCode?e.onProjectSumbit():27===t.keyCode&&e.setState({isEditingProject:!1})}}),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("button",{className:"submit-button",onClick:this.onProjectSumbit},"\u27a4"))),r.a.createElement("div",{onClick:function(){return e.setState({isEditingProject:!1})},className:"layerClick"})):r.a.createElement("button",{onClick:this.enterProjectEditMode,className:"add-task-button",style:this.props.hovered?{marginTop:"80px"}:{}},"+")}},{key:"componentDidMount",value:function(){var e=this;this.fetchTransformDataToState().then((function(){var t=e.scrollerRef.current.querySelector("#key");t&&(e.scrollerRef.current.scrollLeft=t.offsetLeft)}))}},{key:"submitTask",value:function(e){var t=this,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(m.a)({},e,{},{state:1,position:0}))};F("/timeline?key=value",a).then((function(){return t.fetchTransformTasksToState()})).catch((function(){return alert("Failed to post timeline task")}))}},{key:"deleteTask",value:function(e){var t=this;F(function(e){return"/timeline?id=".concat(e)}(e),{method:"DELETE"}).then((function(){return t.fetchTransformTasksToState()})).catch((function(){return alert("Failed to delete timeline task")}))}}]),a}(r.a.Component),te=(a(162),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={active:"FIRST"},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){"FIRST"===this.state.active?this.setState({active:"SECOND"}):this.setState({active:"FIRST"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},"FIRST"===this.state.active?r.a.createElement(L,null):"SECOND"===this.state.active?r.a.createElement(ee,null):null,r.a.createElement("button",{className:"view-togle",onClick:this.handleClick},"Change view"))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(163)},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.b10f0ac9.chunk.js.map